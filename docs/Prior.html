<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Session 4 Prior Distributions | HAD5314H - Applied Bayesian Methods in Clinical Epidemiology and Health Care Research</title>
  <meta name="description" content="Course notes for HAD5314H Winter 2022" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Session 4 Prior Distributions | HAD5314H - Applied Bayesian Methods in Clinical Epidemiology and Health Care Research" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://kuan-liu.github.io/bayes_bookdown/" />
  
  <meta property="og:description" content="Course notes for HAD5314H Winter 2022" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Session 4 Prior Distributions | HAD5314H - Applied Bayesian Methods in Clinical Epidemiology and Health Care Research" />
  
  <meta name="twitter:description" content="Course notes for HAD5314H Winter 2022" />
  

<meta name="author" content="Kuan Liu   Institute of Health Policy, Management and Evaluation   University of Toronto" />


<meta name="date" content="2022-02-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="bayes.html"/>
<link rel="next" href="BayesMCMC.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">HAD5314H - Winter 2022 </a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>University of Toronto Statement of Acknowledgment of Traditional Land</a></li>
<li class="chapter" data-level="" data-path="course-syllabus.html"><a href="course-syllabus.html"><i class="fa fa-check"></i>Course Syllabus</a>
<ul>
<li class="chapter" data-level="" data-path="course-syllabus.html"><a href="course-syllabus.html#course-info"><i class="fa fa-check"></i>Course Info</a></li>
<li class="chapter" data-level="" data-path="course-syllabus.html"><a href="course-syllabus.html#course-description"><i class="fa fa-check"></i>Course Description</a></li>
<li class="chapter" data-level="" data-path="course-syllabus.html"><a href="course-syllabus.html#course-textbook-and-structure"><i class="fa fa-check"></i>Course Textbook and Structure</a></li>
<li class="chapter" data-level="" data-path="course-syllabus.html"><a href="course-syllabus.html#calendar-and-outline"><i class="fa fa-check"></i>Calendar and Outline</a></li>
<li class="chapter" data-level="" data-path="course-syllabus.html"><a href="course-syllabus.html#accessibility-and-accommodations"><i class="fa fa-check"></i>Accessibility and Accommodations</a></li>
<li class="chapter" data-level="" data-path="course-syllabus.html"><a href="course-syllabus.html#academic-integrity"><i class="fa fa-check"></i>Academic Integrity</a></li>
<li class="chapter" data-level="" data-path="course-syllabus.html"><a href="course-syllabus.html#key-resources-and-supports-for-dslph-graduate-students"><i class="fa fa-check"></i>Key Resources and Supports for DSLPH Graduate Students</a></li>
<li class="chapter" data-level="" data-path="course-syllabus.html"><a href="course-syllabus.html#license"><i class="fa fa-check"></i>License</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="into.html"><a href="into.html"><i class="fa fa-check"></i><b>1</b> Introduction to the course</a>
<ul>
<li class="chapter" data-level="1.1" data-path="into.html"><a href="into.html#about-me"><i class="fa fa-check"></i><b>1.1</b> About me</a></li>
<li class="chapter" data-level="1.2" data-path="into.html"><a href="into.html#syllabus"><i class="fa fa-check"></i><b>1.2</b> Syllabus</a></li>
<li class="chapter" data-level="1.3" data-path="into.html"><a href="into.html#some-history"><i class="fa fa-check"></i><b>1.3</b> Some history</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="into.html"><a href="into.html#bayesian-history"><i class="fa fa-check"></i><b>1.3.1</b> Bayesian history</a></li>
<li class="chapter" data-level="1.3.2" data-path="into.html"><a href="into.html#history-of-this-course"><i class="fa fa-check"></i><b>1.3.2</b> History of this course</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="into.html"><a href="into.html#thinking-like-a-bayesian-using-the-concept-of-probability"><i class="fa fa-check"></i><b>1.4</b> Thinking like a Bayesian using the concept of probability</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="into.html"><a href="into.html#probability-is-not-unitary"><i class="fa fa-check"></i><b>1.4.1</b> Probability is not unitary</a></li>
<li class="chapter" data-level="1.4.2" data-path="into.html"><a href="into.html#bayes-rule"><i class="fa fa-check"></i><b>1.4.2</b> Bayes’ Rule</a></li>
<li class="chapter" data-level="1.4.3" data-path="into.html"><a href="into.html#the-scientific-method-in-steps"><i class="fa fa-check"></i><b>1.4.3</b> The Scientific Method in steps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html"><i class="fa fa-check"></i>Lab1 Getting started with R &amp; RStudio</a>
<ul>
<li class="chapter" data-level="1.5" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#r-and-rstudio-installation"><i class="fa fa-check"></i><b>1.5</b> R and RStudio Installation</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#windows-operating-system"><i class="fa fa-check"></i><b>1.5.1</b> Windows operating system</a></li>
<li class="chapter" data-level="1.5.2" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#macos-operating-system"><i class="fa fa-check"></i><b>1.5.2</b> macOS operating system</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#r-packages"><i class="fa fa-check"></i><b>1.6</b> R Packages</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#bayesian-analysis-in-r-using-brms-package"><i class="fa fa-check"></i><b>1.6.1</b> Bayesian Analysis in R using brms package</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#working-in-rstudio"><i class="fa fa-check"></i><b>1.7</b> Working in RStudio</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#rstudio-layout"><i class="fa fa-check"></i><b>1.7.1</b> RStudio layout</a></li>
<li class="chapter" data-level="1.7.2" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#customization"><i class="fa fa-check"></i><b>1.7.2</b> Customization</a></li>
<li class="chapter" data-level="1.7.3" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#working-directory"><i class="fa fa-check"></i><b>1.7.3</b> Working directory</a></li>
<li class="chapter" data-level="1.7.4" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#getting-help-with-r"><i class="fa fa-check"></i><b>1.7.4</b> Getting help with R</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#basic-r-a-crash-introduction"><i class="fa fa-check"></i><b>1.8</b> Basic R (a crash introduction)</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#arithmetic"><i class="fa fa-check"></i><b>1.8.1</b> Arithmetic</a></li>
<li class="chapter" data-level="1.8.2" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#vectors"><i class="fa fa-check"></i><b>1.8.2</b> Vectors</a></li>
<li class="chapter" data-level="1.8.3" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#data-frame---the-titanic-dataset"><i class="fa fa-check"></i><b>1.8.3</b> Data frame - The Titanic dataset</a></li>
<li class="chapter" data-level="1.8.4" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#simple-plots"><i class="fa fa-check"></i><b>1.8.4</b> Simple plots</a></li>
<li class="chapter" data-level="" data-path="lab1-getting-started-with-r-rstudio.html"><a href="lab1-getting-started-with-r-rstudio.html#r-session-information"><i class="fa fa-check"></i>R Session information</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prob.html"><a href="prob.html"><i class="fa fa-check"></i><b>2</b> Probability, random variables and distributions</a>
<ul>
<li class="chapter" data-level="2.1" data-path="prob.html"><a href="prob.html#probability"><i class="fa fa-check"></i><b>2.1</b> Probability</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="prob.html"><a href="prob.html#venn-diagrams"><i class="fa fa-check"></i><b>2.1.1</b> Venn Diagrams</a></li>
<li class="chapter" data-level="2.1.2" data-path="prob.html"><a href="prob.html#probability-rules"><i class="fa fa-check"></i><b>2.1.2</b> Probability Rules</a></li>
<li class="chapter" data-level="2.1.3" data-path="prob.html"><a href="prob.html#how-to-define-and-assign-probabilities-in-general"><i class="fa fa-check"></i><b>2.1.3</b> How to define and assign probabilities in general?</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="prob.html"><a href="prob.html#probability-distributions"><i class="fa fa-check"></i><b>2.2</b> Probability Distributions</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="prob.html"><a href="prob.html#probability-density-functions"><i class="fa fa-check"></i><b>2.2.1</b> Probability density functions</a></li>
<li class="chapter" data-level="2.2.2" data-path="prob.html"><a href="prob.html#discrete-distributions"><i class="fa fa-check"></i><b>2.2.2</b> Discrete Distributions</a></li>
<li class="chapter" data-level="2.2.3" data-path="prob.html"><a href="prob.html#continous-distributions"><i class="fa fa-check"></i><b>2.2.3</b> Continous Distributions</a></li>
<li class="chapter" data-level="" data-path="prob.html"><a href="prob.html#r-session-information-1"><i class="fa fa-check"></i>R Session information</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="bayes.html"><a href="bayes.html"><i class="fa fa-check"></i><b>3</b> Introduction to Bayesian inference</a>
<ul>
<li class="chapter" data-level="3.1" data-path="bayes.html"><a href="bayes.html#classical-frequentist-approach"><i class="fa fa-check"></i><b>3.1</b> Classical frequentist approach</a></li>
<li class="chapter" data-level="3.2" data-path="bayes.html"><a href="bayes.html#introduction-to-bayesian-approach"><i class="fa fa-check"></i><b>3.2</b> Introduction to Bayesian approach</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="bayes.html"><a href="bayes.html#review-from-session-1"><i class="fa fa-check"></i><b>3.2.1</b> Review from session 1</a></li>
<li class="chapter" data-level="3.2.2" data-path="bayes.html"><a href="bayes.html#the-beta-binomial-model"><i class="fa fa-check"></i><b>3.2.2</b> The Beta-binomial model</a></li>
<li class="chapter" data-level="3.2.3" data-path="bayes.html"><a href="bayes.html#the-normal-normal-model"><i class="fa fa-check"></i><b>3.2.3</b> The Normal-normal model</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="bayes.html"><a href="bayes.html#summary-of-conjugate-priors-models"><i class="fa fa-check"></i><b>3.3</b> Summary of Conjugate priors &amp; models</a></li>
<li class="chapter" data-level="3.4" data-path="bayes.html"><a href="bayes.html#why-bayesian-statistical-estimation-revisit"><i class="fa fa-check"></i><b>3.4</b> Why Bayesian: Statistical Estimation Revisit</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="bayes.html"><a href="bayes.html#classic-frequentist-inference"><i class="fa fa-check"></i><b>3.4.1</b> Classic Frequentist Inference</a></li>
<li class="chapter" data-level="3.4.2" data-path="bayes.html"><a href="bayes.html#bayesian-inference"><i class="fa fa-check"></i><b>3.4.2</b> Bayesian Inference</a></li>
<li class="chapter" data-level="" data-path="bayes.html"><a href="bayes.html#r-session-information-2"><i class="fa fa-check"></i>R Session information</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Prior.html"><a href="Prior.html"><i class="fa fa-check"></i><b>4</b> Prior Distributions</a>
<ul>
<li class="chapter" data-level="4.1" data-path="Prior.html"><a href="Prior.html#choosing-priors"><i class="fa fa-check"></i><b>4.1</b> Choosing priors</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="Prior.html"><a href="Prior.html#eliciting-priors-from-experts"><i class="fa fa-check"></i><b>4.1.1</b> Eliciting priors from experts</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="Prior.html"><a href="Prior.html#default-clincial-priors"><i class="fa fa-check"></i><b>4.2</b> Default clincial priors</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="Prior.html"><a href="Prior.html#non-informative-or-reference-priors"><i class="fa fa-check"></i><b>4.2.1</b> “Non-informative” or “reference” priors</a></li>
<li class="chapter" data-level="4.2.2" data-path="Prior.html"><a href="Prior.html#minimally-informative-prior"><i class="fa fa-check"></i><b>4.2.2</b> Minimally informative prior</a></li>
<li class="chapter" data-level="4.2.3" data-path="Prior.html"><a href="Prior.html#skeptical-prior"><i class="fa fa-check"></i><b>4.2.3</b> Skeptical Prior</a></li>
<li class="chapter" data-level="4.2.4" data-path="Prior.html"><a href="Prior.html#optimisticenthusiastic-prior"><i class="fa fa-check"></i><b>4.2.4</b> Optimistic/enthusiastic Prior</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="Prior.html"><a href="Prior.html#historical-data-meta-analysis"><i class="fa fa-check"></i><b>4.3</b> Historical data (meta-analysis)</a></li>
<li class="chapter" data-level="4.4" data-path="Prior.html"><a href="Prior.html#hierarchical-priors-and-shrinkage-priors"><i class="fa fa-check"></i><b>4.4</b> Hierarchical priors and shrinkage priors</a>
<ul>
<li class="chapter" data-level="" data-path="Prior.html"><a href="Prior.html#r-session-information-3"><i class="fa fa-check"></i>R Session information</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="BayesMCMC.html"><a href="BayesMCMC.html"><i class="fa fa-check"></i><b>5</b> Bayesian estimation with MCMC</a>
<ul>
<li class="chapter" data-level="5.1" data-path="BayesMCMC.html"><a href="BayesMCMC.html#introduction-to-markov-chain-monte-carlo-methods"><i class="fa fa-check"></i><b>5.1</b> Introduction to Markov Chain Monte Carlo Methods</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="BayesMCMC.html"><a href="BayesMCMC.html#metropolis-hastings"><i class="fa fa-check"></i><b>5.1.1</b> Metropolis-Hastings</a></li>
<li class="chapter" data-level="5.1.2" data-path="BayesMCMC.html"><a href="BayesMCMC.html#gibbs-sampling"><i class="fa fa-check"></i><b>5.1.2</b> Gibbs sampling</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="BayesMCMC.html"><a href="BayesMCMC.html#mcmc-demo-with-brms"><i class="fa fa-check"></i><b>5.2</b> MCMC demo with brms</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="BayesMCMC.html"><a href="BayesMCMC.html#beta-binomial-example"><i class="fa fa-check"></i><b>5.2.1</b> Beta-Binomial example</a></li>
<li class="chapter" data-level="5.2.2" data-path="BayesMCMC.html"><a href="BayesMCMC.html#normal-normal-example"><i class="fa fa-check"></i><b>5.2.2</b> Normal-normal example</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="BayesMCMC.html"><a href="BayesMCMC.html#mcmc-diganostics"><i class="fa fa-check"></i><b>5.3</b> MCMC diganostics</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="BayesReg1.html"><a href="BayesReg1.html"><i class="fa fa-check"></i><b>6</b> Bayesian Regression I</a>
<ul>
<li class="chapter" data-level="6.1" data-path="BayesReg1.html"><a href="BayesReg1.html#normal-models-and-linear-regression"><i class="fa fa-check"></i><b>6.1</b> Normal Models and Linear Regression</a></li>
<li class="chapter" data-level="6.2" data-path="BayesReg1.html"><a href="BayesReg1.html#hierarchical-models-and-convergence"><i class="fa fa-check"></i><b>6.2</b> Hierarchical models and convergence</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="BayesReg2.html"><a href="BayesReg2.html"><i class="fa fa-check"></i><b>7</b> Bayesian Regression II</a>
<ul>
<li class="chapter" data-level="7.1" data-path="BayesReg2.html"><a href="BayesReg2.html#models-for-binary-data"><i class="fa fa-check"></i><b>7.1</b> Models for Binary Data</a></li>
<li class="chapter" data-level="7.2" data-path="BayesReg2.html"><a href="BayesReg2.html#models-for-count-data"><i class="fa fa-check"></i><b>7.2</b> Models for Count Data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a> <a href="https://www.kuan-liu.com/" target="blank">Developed by Kuan Liu</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">HAD5314H - Applied Bayesian Methods in Clinical Epidemiology and Health Care Research</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Prior" class="section level1" number="4">
<h1><span class="header-section-number">Session 4</span> Prior Distributions</h1>
<div class="chapterintro">
<ul>
<li>Learn different ways of selecting and constructing priors</li>
<li>Prior distributions used in clinical studies</li>
<li>Introduction to hierarchical priors for random effects</li>
<li>Introduction to sparsity promoting prior for Bayesian regression variable selection</li>
</ul>
</div>
<script src="hideOutput.js"></script>
<p></br></p>
<div id="choosing-priors" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Choosing priors</h2>
<p><strong>Types of prior</strong></p>
<p>Generally speaking, there are two types of priors: informative and noninformative.</p>
<ul>
<li><p>Priors with information on values of parameters, informative priors</p>
<ul>
<li>Priors that charaterize personal/expert opinion</li>
<li>Prior elicitation</li>
<li>Historical data or past evidence</li>
<li>Default priors in clincial studies</li>
<li>Informative priors used for computational efficiency and variable selection</li>
</ul></li>
<li><p>“objective” and non-informative priors</p>
<ul>
<li>Flat prior, vague prior, and weakly-informative priors</li>
</ul></li>
</ul>
<p><strong>Important consideration before choosing a prior</strong></p>
<ul>
<li>Choice of prior does affect the posterior, however, prior is only one part of Bayesian modelling.
<ul>
<li>Prior is not unique and there is no one “correct” prior distribution!</li>
<li>In many situations with large sample sizes, the posterior distribution is not too sensitive to reasonable changes in prior.</li>
<li>When working with rare outcomes (e.g., small disease cohort), changes in prior distribution can influence posterior distribution</li>
</ul></li>
<li>One criticism of Bayesian inference is in its incorporation of priors, which is considered as a subjective modelling choice.
<ul>
<li>However, any statistical analysis is inherently subjective, frequentist or Bayesian.</li>
<li>“Subjective” choice of prior can often be <strong>beneficial</strong>
<ul>
<li>Sensitivity analysis is crucial in assessing the impact of particular distributions on the conclusions.</li>
<li>when we are working with small samples, informative prior allows us to explicitly incorporate past evidence and expert knowledge</li>
<li>we can also use sparsity promoting prior (i.e., shrinkage prior) to reduce the number of parameters to be estimated to improve estimation efficiency and avoid over-fitting</li>
</ul></li>
</ul></li>
</ul>
<div id="eliciting-priors-from-experts" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Eliciting priors from experts</h3>
<p>Elicitation is the process of</p>
<ul>
<li>representing the knowledge of one or more experts - expert knowledge is useful!</li>
<li>concerning an uncertain quantity as a probability distribution for that quantity (i.e. as a random variable with some distribution)</li>
</ul>
<p>Good elicitation methods are formal, statistically rigorous, and use carefully considered probabilistic judgement techniques</p>
<ul>
<li><p>in practice, elicitation follows pre-developed elicitation protocol</p></li>
<li><p>elicitation process often involve training and discussion between experts and statisticians to eliminate bias, mis-interpretation, over-optimistic thinking …</p></li>
</ul>
<p><strong>Aggregating expert judgement</strong></p>
<p>There are two general approaches to summarizing the estimates from the experts.</p>
<ul>
<li>Aggregate the distributions
<ul>
<li>Elicit a distribution from each expert separately</li>
<li>Combine these multiple distribution using mathematical aggregation, also called “pooling”</li>
</ul></li>
<li>Aggregate the experts
<ul>
<li>gather expert belief and elicit a single distribution, also called behavioural aggregation.</li>
</ul></li>
</ul>
<p><strong>Three protocols</strong></p>
<ul>
<li><strong>Most popular.</strong> Sheffield Elicitation Framework (SHELF). The SHELF protocol is a behavioral aggregation method that uses two rounds of judgments. <span class="citation">(<a href="#ref-o2006uncertain" role="doc-biblioref">O’Hagan et al. 2006</a>)</span>
<ul>
<li>In the first round, individuals make private judgements</li>
<li>In the second round, those judgments are reviewed before the group agrees on consensus judgement.</li>
</ul></li>
<li>Cooke protocol. A mathematical aggregation approach weights expert responses by their likely accuracy. <span class="citation">(<a href="#ref-cooke1991experts" role="doc-biblioref">Cooke et al. 1991</a>)</span>
<ul>
<li>The likely accuracy is calculated using a “seed” value.</li>
<li>Expert who more accurately predict the seed value are weighted more.</li>
</ul></li>
<li><a href="https://www.rand.org/topics/delphi-method.html">Delphi Method</a> The Delphi is similar to SHELF as it is a behavioral aggregation method with two or more rounds except that anonymity is maintained in terms of who gave which answers.
<ul>
<li>unlike SHELF, experts provide their judgments individually with no interaction and a pooling rule is required across expert final distributions.</li>
</ul></li>
</ul>
<p>Reference reading on expert elicitation:</p>
<ul>
<li><a href="https://www.sciencedirect.com/science/article/pii/S0895435609001759?casa_token=hejHbiF8uv4AAAAA:wfJlHvZYsIkhyGIrPooRQuO8Bz57fPoe_wYhUvW4xA02hio_LDCZF8KzGykdotVcPCQSVQchDSs#bib24">Methods to elicit beliefs for Bayesian priors: a systematic review (2010), by johnson et al.</a> <span class="citation">(<a href="#ref-johnson2010methods" role="doc-biblioref">S. R. Johnson, Tomlinson, Hawker, Granton, and Feldman 2010</a>)</span>
<ul>
<li>Reviewed on measurement properties including validity,
reliability, responsiveness, and feasibility (lacking in exisiting work).</li>
<li>A valid and reliable method <span class="citation">(<a href="#ref-johnson2010valid" role="doc-biblioref">S. R. Johnson, Tomlinson, Hawker, Granton, Grosbein, et al. 2010</a>)</span></li>
</ul></li>
<li><a href="https://librarysearch.library.utoronto.ca/permalink/01UTORONTO_INST/fedca1/cdi_crossref_primary_10_1007_s11336_007_9036_x">Uncertain judgements: eliciting experts’ probabilities (2006) by O’Hagan et al.</a> <span class="citation">(<a href="#ref-o2006uncertain" role="doc-biblioref">O’Hagan et al. 2006</a>)</span>
<ul>
<li>SHELF documentation and software: <a href="http://www.jeremy-oakley.staff.shef.ac.uk/shelf/software/" class="uri">http://www.jeremy-oakley.staff.shef.ac.uk/shelf/software/</a></li>
<li>Dr. Anthony O’Hagan’s talk on elicitation and SHELF: <a href="https://www.youtube.com/embed/cU4Cd8CGiaM" class="uri">https://www.youtube.com/embed/cU4Cd8CGiaM</a></li>
</ul></li>
</ul>
<div class="workedexample">
<p><strong>Tutorial example on SHELF framework</strong> - Elicitation workshop for Bronchiolitis in Infants Placebo Versus Epinephrine and Dexamethasone (BIPED) study (project manuscript under review)</p>
<p>Principal Investigator for the Elicitation Study: Dr. <a href="https://www.sickkids.ca/en/staff/h/anna-heath/">Anna Heath</a>, PhD, MMath, The Hospital for Sick Children, Toronto</p>
<p>Research Assistant and ShinyApp Developer: <a href="https://www.linkedin.com/in/phebelan/">Jingxian (Phebe) Lan</a>, M.Sc</p>
</div>
</div>
</div>
<div id="default-clincial-priors" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Default clincial priors</h2>
<p>Section 5.5 Default Priors of <span class="citation">(<a href="#ref-spiegelhalter2003" role="doc-biblioref">David J. Spiegelhalter, Abrams, and Myles 2003</a>)</span></p>
<div id="non-informative-or-reference-priors" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> “Non-informative” or “reference” priors</h3>
<ul>
<li>(Pros) It is attractive to seek a “noninformative”
prior to use as a baseline analysis
<ul>
<li>“such analyses have been suggested as a way of making probability statements about parameters without being explicitly Bayesian” <span class="citation">(<a href="#ref-spiegelhalter2004incorporating" role="doc-biblioref">David J. Spiegelhalter 2004</a>)</span></li>
</ul></li>
<li>(Cons) However, nonninformative priors are nonsensical and can lead to inference problems, especially in smaller samples
<ul>
<li>can have a strong impact particularly when events are rare.</li>
</ul></li>
<li>Prior Choice Recommendations and Wiki developed by the stan team, <a href="https://github.com/stan-dev/stan/wiki/Prior-Choice-Recommendations" class="uri">https://github.com/stan-dev/stan/wiki/Prior-Choice-Recommendations</a>
<ul>
<li>this guide is written by statisticians, thus, recommendations are primary for non-informative, vague, and weakly informative priors</li>
<li>General principle on this guide provides a start</li>
</ul></li>
</ul>
<div class="workedexample">
<p><strong>1. Noninformative Prior on Proportion</strong></p>
<p>Suppose you are estimating the 30-day mortality after elective non-cardiac surgery, what is an uninformative prior for the proportion dying?</p>
<ul>
<li>An “off the shelf” uninformative priors for binomial model are
<ol style="list-style-type: decimal">
<li><span class="math inline">\(\theta \sim U(0,1) \equiv Beta(1,1)\)</span></li>
<li>Jeffreys prior, <span class="math inline">\(\theta \sim Beta(0.5,0.5)\)</span></li>
</ol></li>
</ul>
<p><img src="bayes_bookdown_files/figure-html/unnamed-chunk-62-1.png" width="672" /></p>
<table>
<thead>
<tr class="header">
<th align="left">Prior</th>
<th align="left">median</th>
<th align="left">q2.5</th>
<th align="left">q97.5</th>
<th align="left">Pr(<span class="math inline">\(\theta\)</span>&lt; 0.25)</th>
<th align="left">Pr(<span class="math inline">\(\theta\)</span>&lt; 0.5)</th>
<th align="left">Pr(<span class="math inline">\(\theta\)</span>&lt; 0.75)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Beta(1,1)</td>
<td align="left">0.5</td>
<td align="left">0.025</td>
<td align="left">0.975</td>
<td align="left">0.25</td>
<td align="left">0.5</td>
<td align="left">0.75</td>
</tr>
<tr class="even">
<td align="left">Beta(0.5,0.5)</td>
<td align="left">0.5</td>
<td align="left">0.002</td>
<td align="left">0.998</td>
<td align="left">0.333</td>
<td align="left">0.5</td>
<td align="left">0.667</td>
</tr>
</tbody>
</table>
<p><strong>2. Noninformative Prior on log-relative risk</strong></p>
<ul>
<li><p>Suppose you want to estimate the relative risk for death in a clinical trial</p></li>
<li><p>Relative risk modelling works with the log-relative risk (as it has an approximately normal likelihood)</p></li>
<li><p>An “off the shelf” uninformative prior with a large variance might be
<span class="math display">\[\log(RR) = \theta \sim N(0, \sigma^2 = 10^2)\]</span></p></li>
<li><p>Prior 95% Credible Interval for log(RR) is -19.6 to 19.6</p></li>
<li><p>Prior 95% Credible Interval for RR is <span class="math inline">\(3 \times 10^{-9}\)</span> to <span class="math inline">\(3 \times 10^{9}\)</span></p></li>
<li><p>A more sensible choice, <span class="math inline">\(N(0,5^2)\)</span>, for log scale OR, RR, and HR.</p></li>
</ul>
<p><img src="bayes_bookdown_files/figure-html/unnamed-chunk-63-1.png" width="672" /></p>
<table>
<thead>
<tr class="header">
<th align="left">Prior log(RR)</th>
<th align="left">median log(RR)</th>
<th align="left">q2.5 log(RR)</th>
<th align="left">q97.5 log(RR)</th>
<th align="left">q2.5 RR</th>
<th align="left">q97. RR</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">N(0,100)</td>
<td align="left">0</td>
<td align="left">-19.6</td>
<td align="left">19.6</td>
<td align="left">0.0000000031</td>
<td align="left">325098849.19</td>
</tr>
<tr class="even">
<td align="left">N(0,25)</td>
<td align="left">0</td>
<td align="left">-9.8</td>
<td align="left">9.8</td>
<td align="left">0.0000554616</td>
<td align="left">18030.5</td>
</tr>
<tr class="odd">
<td align="left">N(0,16)</td>
<td align="left">0</td>
<td align="left">-7.84</td>
<td align="left">7.84</td>
<td align="left">0.0003937258</td>
<td align="left">2539.84</td>
</tr>
<tr class="even">
<td align="left">N(0,9)</td>
<td align="left">0</td>
<td align="left">-5.88</td>
<td align="left">5.88</td>
<td align="left">0.0027950873</td>
<td align="left">357.77</td>
</tr>
<tr class="odd">
<td align="left">N(0,4)</td>
<td align="left">0</td>
<td align="left">-3.92</td>
<td align="left">3.92</td>
<td align="left">0.019842524</td>
<td align="left">50.4</td>
</tr>
<tr class="even">
<td align="left">N(0,1)</td>
<td align="left">0</td>
<td align="left">-1.96</td>
<td align="left">1.96</td>
<td align="left">0.1408634941</td>
<td align="left">7.1</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Quick Summary</strong></p>
<ul>
<li>Posterior could land on implausible values with small numbers of deaths in one group or other.</li>
<li>These issues resolve somewhat with larger data sets</li>
<li>With a precise likelihood (e.g., large sample size or large number of events), data rescues you from allowing implausible values.</li>
</ul>
<p><strong>Evaluating Priors?</strong>
1. Section 5.8 <span class="citation">(<a href="#ref-spiegelhalter2003" role="doc-biblioref">David J. Spiegelhalter, Abrams, and Myles 2003</a>)</span> introduced a Box approach to comparing priors with subsequent data in assessing the ability of the chosen subjective prior to predict the true benefit of intervention
- The prior is used to derive a predictive distribution for future observations, and thus to calculate the chance of a result with lower predictive ordinate than that actually observed:
- when the predictive distribution is symmetric and unimodal, this is analagous to a traditional two-sided P-value in measuring the predictive probability of getting a result at least as extreme as that observed.
- this assessment can be used to evaluate prior distributions parameter values</p>
<ol start="2" style="list-style-type: decimal">
<li>When we have several candidate prior distributions (e.g. lognormal, beta, normal, etc), we can use goodness-of-fit statistics like Kolmogorov-Smirnov, Cramer-von Mises, and Anderson-Darl to evaluate which distribution best fit the prior belief density.
<ul>
<li><a href="https://cran.r-project.org/web/packages/fitdistrplus/vignettes/paper2JSS.pdf">fitdistrplus: An R Package for Fitting Distributions</a></li>
</ul></li>
</ol>
<div class="guidedexercise">
<p><strong>1. ISSUE with Uniform Priors</strong> uniform priors on one scale are not uniform on a transformed scale</p>
<p>Suppose we set prior <span class="math inline">\(\theta \sim U(0,1)\)</span> as an uninformative prior on the parameter quantifying risk of adverse event, probability <span class="math inline">\(\theta\)</span></p>
<ul>
<li>Prior distribution on log(<span class="math inline">\(\frac{\theta}{1-\theta}\)</span>), which is also called the logit of <span class="math inline">\(\theta\)</span> is no longer uniformly distributed</li>
</ul>
<p><img src="bayes_bookdown_files/figure-html/unnamed-chunk-64-1.png" width="672" /></p>
<p><strong>2. Using large variance normal distribution as non-informative prior</strong></p>
<ul>
<li>How is a normal distribution N(0,<span class="math inline">\(100^2\)</span>), with its bell-shape, uninformative?</li>
<li>It does not put equal density on all points, as the density drops off from zero in each direction</li>
<li>The key is that it is locally uniform</li>
<li>In the region where a parameter is likely to lie, the normal distribution is flat.</li>
</ul>
<p><img src="bayes_bookdown_files/figure-html/unnamed-chunk-65-1.png" width="672" /></p>
</div>
</div>
<div id="minimally-informative-prior" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Minimally informative prior</h3>
<ul>
<li>Use substantive knowledge to put most prior weight on possible values, without being too restrictive
<ul>
<li><p>From example, a RR for mortality in a trial, a prior with most weight on values of 0.66 to 1.5, a N(0,1) prior would be considered suitable.</p></li>
<li><p>For the between-person standard deviation of a 0-40 quality of life instrument, a prior with most weight on values under 10, a possible prior would be Gamma(0.1,0.1) on the precision.</p></li>
</ul></li>
</ul>
</div>
<div id="skeptical-prior" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Skeptical Prior</h3>
<ul>
<li><p>priors that express doubts about large effects</p></li>
<li><p>Mathematically speaking, a sceptical prior about a treatment effect will have a mean of zero and a shape chosen to include plausible treatment differences which determines the degree of scepticism.</p>
<ul>
<li>This is centred at no effect and a 95% CR extends to a minimally clinically important difference (MCID)</li>
</ul></li>
<li><p>Skeptical prior will “shrink” back observed results towards the null effect</p></li>
<li><p>If under the skeptical prior, the posterior results support conclusion of effectiveness (results suggest departure from null), the skeptic is convinced!</p></li>
<li><p>Spiegelhater suggested a reasonable degree of scepticism maybe feeling that the study has been designed around an alternative hypothesis that is optimistic,</p>
<ul>
<li>formalized by a prior with only a small probability say 5% that the effect is as large as the optimistic alternative</li>
</ul></li>
</ul>
<div class="workedexample">
<p><strong>Example from EOLIA trial</strong><span class="citation">(<a href="#ref-goligher2018extracorporeal" role="doc-biblioref">Goligher et al. 2018</a>)</span></p>
<ul>
<li>MCID for 60-day mortality in RR comparing between ECOMO and Rescue Lung Injury in Severe ARDS is 0.67, log(0.4/0.6) = -0.405.</li>
<li>Let P(RR&lt;0.67) = P(log(RR)&lt; -0.405) = 0.05, that is saying the probability of the ECOMO being effective beyond MCID is only 5%, we have</li>
</ul>
<p><span class="math display">\[1.6445 \times \sigma = MCID = |-0.405| = 0.405\]</span>
<span class="math display">\[\sigma = \frac{0.405}{1.6445} = 0.242\]</span></p>
<ul>
<li>yielding a candidate skeptical prior on log(RR) ~ <span class="math inline">\(N(0,0.242^2)\)</span></li>
</ul>
</div>
</div>
<div id="optimisticenthusiastic-prior" class="section level3" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Optimistic/enthusiastic Prior</h3>
<ul>
<li>This is centred at the MCID and a 95% CR extends to no effect</li>
<li>Optimistic Prior will move observed results towards the MCID</li>
<li>If a optimist is convinced that there is no effect, the evidence for no effect is strong</li>
<li>For the reanalysis of the EOLIA trial, the strongly enthusiastic prior is defined as log(RR) ~ <span class="math inline">\(N(0.67, 0.25^2)\)</span>.</li>
</ul>
</div>
</div>
<div id="historical-data-meta-analysis" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Historical data (meta-analysis)</h2>
<ul>
<li>Incorporating historical data in Bayesian analysis
<ul>
<li>these can be formalized as a means of using past evidence as a basis for a prior distribution for a parameter of interest</li>
<li>Additional reading: Section 5.4 Summary of External Evidence of <span class="citation">(<a href="#ref-spiegelhalter2003" role="doc-biblioref">David J. Spiegelhalter, Abrams, and Myles 2003</a>)</span></li>
</ul></li>
<li>Meta-analysis is a very useful tool for evidence synthesis in clinical research
<ul>
<li><strong>Juan Pablo</strong> will give us a guest lecture on Bayesian meta-analysis after reading week!</li>
<li>We can directly use published meta-analysis results to construct priors</li>
<li>if not available, one can also complete a meta-analysis to synthesis evidence for prior construction</li>
</ul></li>
<li>These types of prior are called data-derived priors.
<ul>
<li>For example, in the Bayesian reanalysis of the EOLIA trial, data-derived priors are constructed from a Bayesian meta-analysis of published relevant studies.</li>
<li>The posterior distribution (updated belief) of treatment effect is produced by combining data-derived prior with data from the current study.</li>
</ul></li>
</ul>
<p><strong>Downweighting</strong>:</p>
<p>To reflect concerns about possible differences between the current and previous studies, the <strong>variance</strong> of the past studies can be inflated to receive less weight in the analysis on the pooled estimate of effect.</p>
<p><strong>Data-derived prior from the Bayesian reanalysis of the EOLIA trial</strong><span class="citation">(<a href="#ref-goligher2018extracorporeal" role="doc-biblioref">Goligher et al. 2018</a>)</span></p>
<ul>
<li>Data-derived prior was developed based on three relevant studies from a meta-analysis of ECMO for ARDS <span class="citation">(<a href="#ref-munshi2014extracorporeal" role="doc-biblioref">Munshi et al. 2014</a>)</span></li>
<li>Three studies are:<span class="citation">(<a href="#ref-peek2009efficacy" role="doc-biblioref">Peek et al. 2009</a>)</span>, <span class="citation">(<a href="#ref-pham2013extracorporeal" role="doc-biblioref">Pham et al. 2013</a>)</span>, and <span class="citation">(<a href="#ref-noah2011referral" role="doc-biblioref">Noah et al. 2011</a>)</span></li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-66"></span>
<img src="images/ecmo_meta.JPG" alt="In-hospital mortality. Forest plot showing pooled analysis of four randomized controlled trials and six observational studies comparing extracorporeal life support (ECLS) to conventional mechanical ventilation (MV) from Munshi et al 2014." width="850" />
<p class="caption">
Figure 4.1: In-hospital mortality. Forest plot showing pooled analysis of four randomized controlled trials and six observational studies comparing extracorporeal life support (ECLS) to conventional mechanical ventilation (MV) from Munshi et al 2014.
</p>
</div>
<ul>
<li>After fitting a random effect model, the pooled RR is estimated as 0.64 with 95% CI (0.38 - 1.06).</li>
<li>We now express this prior as a normal likelihood on the log(RR) scale and consider three scenarios of “downweighting” (10%, 50% and 100%).</li>
</ul>
<div class="fold s">

<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="Prior.html#cb60-1" aria-hidden="true" tabindex="-1"></a>CI.normal <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">c</span>(<span class="fl">0.38</span>, <span class="fl">1.06</span>))</span>
<span id="cb60-2"><a href="Prior.html#cb60-2" aria-hidden="true" tabindex="-1"></a>sigma <span class="ot">&lt;-</span> (CI.normal[<span class="dv">2</span>] <span class="sc">-</span> CI.normal[<span class="dv">1</span>])<span class="sc">/</span>(<span class="dv">2</span><span class="sc">*</span><span class="fl">1.96</span>)</span>
<span id="cb60-3"><a href="Prior.html#cb60-3" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fl">0.64</span>)</span>
<span id="cb60-4"><a href="Prior.html#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="Prior.html#cb60-5" aria-hidden="true" tabindex="-1"></a>xlabs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.6</span>, <span class="fl">0.8</span>, <span class="dv">1</span>, <span class="dv">3</span>)</span>
<span id="cb60-6"><a href="Prior.html#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="Prior.html#cb60-7" aria-hidden="true" tabindex="-1"></a>noweight <span class="ot">&lt;-</span> <span class="fu">dnorm</span>(<span class="fu">log</span>(<span class="fu">seq</span>(<span class="fl">0.1</span>,<span class="dv">3</span>, <span class="at">length=</span><span class="dv">201</span>)), mu, sigma)</span>
<span id="cb60-8"><a href="Prior.html#cb60-8" aria-hidden="true" tabindex="-1"></a>weight50 <span class="ot">&lt;-</span> <span class="fu">dnorm</span>(<span class="fu">log</span>(<span class="fu">seq</span>(<span class="fl">0.1</span>,<span class="dv">3</span>, <span class="at">length=</span><span class="dv">201</span>)), mu, sigma<span class="sc">/</span><span class="fu">sqrt</span>(<span class="fl">0.5</span>))</span>
<span id="cb60-9"><a href="Prior.html#cb60-9" aria-hidden="true" tabindex="-1"></a>weight10 <span class="ot">&lt;-</span> <span class="fu">dnorm</span>(<span class="fu">log</span>(<span class="fu">seq</span>(<span class="fl">0.1</span>,<span class="dv">3</span>, <span class="at">length=</span><span class="dv">201</span>)), mu, sigma<span class="sc">/</span><span class="fu">sqrt</span>(<span class="fl">0.1</span>))</span>
<span id="cb60-10"><a href="Prior.html#cb60-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-11"><a href="Prior.html#cb60-11" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">logrr.range =</span> <span class="fu">rep</span>(<span class="fu">log</span>(<span class="fu">seq</span>(<span class="fl">0.1</span>,<span class="dv">3</span>, <span class="at">length=</span><span class="dv">201</span>)),<span class="dv">3</span>),</span>
<span id="cb60-12"><a href="Prior.html#cb60-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">plog.rr =</span> <span class="fu">c</span>(noweight, weight50, weight10),</span>
<span id="cb60-13"><a href="Prior.html#cb60-13" aria-hidden="true" tabindex="-1"></a>                <span class="at">Weighting =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;100% weight&quot;</span>,<span class="st">&quot;50% weight&quot;</span>,<span class="st">&quot;10% weight&quot;</span>),<span class="at">each=</span><span class="dv">201</span>)) </span>
<span id="cb60-14"><a href="Prior.html#cb60-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-15"><a href="Prior.html#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(d, <span class="fu">aes</span>(logrr.range, plog.rr,<span class="at">colour=</span>Weighting))<span class="sc">+</span></span>
<span id="cb60-16"><a href="Prior.html#cb60-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb60-17"><a href="Prior.html#cb60-17" aria-hidden="true" tabindex="-1"></a>     <span class="fu">xlab</span>(<span class="st">&quot;RR&quot;</span>)<span class="sc">+</span></span>
<span id="cb60-18"><a href="Prior.html#cb60-18" aria-hidden="true" tabindex="-1"></a>     <span class="fu">ylab</span>(<span class="st">&quot;probability density&quot;</span>)<span class="sc">+</span></span>
<span id="cb60-19"><a href="Prior.html#cb60-19" aria-hidden="true" tabindex="-1"></a>     <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>))<span class="sc">+</span></span>
<span id="cb60-20"><a href="Prior.html#cb60-20" aria-hidden="true" tabindex="-1"></a>     <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">log</span>(xlabs),<span class="at">labels=</span>xlabs, <span class="at">limits=</span><span class="fu">c</span>(<span class="fu">log</span>(<span class="fl">0.1</span>), <span class="fu">log</span>(<span class="dv">3</span>)))<span class="sc">+</span></span>
<span id="cb60-21"><a href="Prior.html#cb60-21" aria-hidden="true" tabindex="-1"></a>     <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;goldenrod&quot;</span>,<span class="st">&quot;steelblue&quot;</span>,<span class="st">&quot;black&quot;</span>))<span class="sc">+</span></span>
<span id="cb60-22"><a href="Prior.html#cb60-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb60-23"><a href="Prior.html#cb60-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Data-derived priors&quot;</span>)</span></code></pre></div>
<img src="bayes_bookdown_files/figure-html/unnamed-chunk-67-1.png" width="480" style="display: block; margin: auto;" />
<div>





</div>
<div id="hierarchical-priors-and-shrinkage-priors" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Hierarchical priors and shrinkage priors</h2>
<ul>
<li>Don’t necessarily have information about the value of a parameter</li>
<li>Expresses knowledge, for example, that a several of parameters, <span class="math inline">\(\mu_1, \ldots, \mu_k\)</span> have a common mean, without saying what that mean is</li>
</ul>
<p><span class="math display">\[\mu_i \sim N(\mu_0, \sigma^2) \]</span></p>
<ul>
<li><p>The Bayesian posterior means for <span class="math inline">\(\mu_i\)</span> will be “shrunk” towards the overall mean <span class="math inline">\(\mu_0\)</span> - (this is called formally as exchangeability)</p></li>
<li><p>By sharing information this way, individual estimates have smaller variances - A way of avoiding overfitting</p></li>
<li><p>These are priors on higher level parameters (variances and random effects are the most common)</p></li>
</ul>
<p><strong>Example prior distribution for variance - Gamma Distribution</strong></p>
<p><img src="bayes_bookdown_files/figure-html/unnamed-chunk-69-1.png" width="672" /></p>
<ul>
<li><p>Shrinkage priors in Bayesian penalization aim to shrink small effects to zero while maintaining true large effects.</p></li>
<li><p>The horseshoe prior is a member of the family of multivariate scale mixtures of normals, and is therefore closely related to widely used approaches for sparse Bayesian learning, including, among others, Laplace priors (e.g. the LASSO) and Student-t priors.</p></li>
</ul>
<p><strong>Example horseshoe prior</strong></p>
<ul>
<li>Consider a linear regression model with covariates <span class="math inline">\(X = (x_1, \ldots, x_p)\)</span>. <span class="math inline">\(\beta\)</span> is a <span class="math inline">\(1\times p\)</span> vector of regression coefficient and i index number of subject.</li>
</ul>
<p><span class="math display">\[y_i = \beta^TX_i + \epsilon_i, \ e_i \sim N(0,\sigma^2), \ i = 1, \ldots, n\]</span></p>
<ul>
<li><p>The horseshoe prior (hierarchical) is given as:
<span class="math display">\[\beta_j \mid \lambda_j, \tau, \sim N(0, \lambda_j^2 \tau^2)\]</span>
<span class="math display">\[\lambda_j \sim halfCauchy(0,1), j = 1, \ldots, p.\]</span>
<span class="math display">\[\tau \sim halfCauchy(0,\tau_0)\]</span></p></li>
<li><p><span class="math inline">\(\lambda_j\)</span> is called local shrinkage parameter - enable some <span class="math inline">\(\beta\)</span> to escape the shrinkage</p></li>
<li><p><span class="math inline">\(\tau\)</span> is the global shrinkage parameter - shrink all <span class="math inline">\(\beta\)</span> towards zero, thus removing the corresponding covariate from the regression model.</p></li>
</ul>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="Prior.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visually compare normal, student_t, cauchy, laplace, and product_normal</span></span>
<span id="cb61-2"><a href="Prior.html#cb61-2" aria-hidden="true" tabindex="-1"></a>compare_priors <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">scale =</span> <span class="dv">1</span>, <span class="at">df_t =</span> <span class="dv">2</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">10</span>)) {</span>
<span id="cb61-3"><a href="Prior.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  dt_loc_scale <span class="ot">&lt;-</span> <span class="cf">function</span>(x, df, location, scale) {</span>
<span id="cb61-4"><a href="Prior.html#cb61-4" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span><span class="sc">/</span>scale <span class="sc">*</span> <span class="fu">dt</span>((x <span class="sc">-</span> location)<span class="sc">/</span>scale, df)</span>
<span id="cb61-5"><a href="Prior.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-6"><a href="Prior.html#cb61-6" aria-hidden="true" tabindex="-1"></a>  dlaplace <span class="ot">&lt;-</span> <span class="cf">function</span>(x, location, scale) {</span>
<span id="cb61-7"><a href="Prior.html#cb61-7" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.5</span> <span class="sc">/</span> scale <span class="sc">*</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fu">abs</span>(x <span class="sc">-</span> location) <span class="sc">/</span> scale)</span>
<span id="cb61-8"><a href="Prior.html#cb61-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-9"><a href="Prior.html#cb61-9" aria-hidden="true" tabindex="-1"></a>  dproduct_normal <span class="ot">&lt;-</span> <span class="cf">function</span>(x, scale) {</span>
<span id="cb61-10"><a href="Prior.html#cb61-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">besselK</span>(<span class="fu">abs</span>(x) <span class="sc">/</span> scale <span class="sc">^</span> <span class="dv">2</span>, <span class="at">nu =</span> <span class="dv">0</span>) <span class="sc">/</span> (scale <span class="sc">^</span> <span class="dv">2</span> <span class="sc">*</span> pi)</span>
<span id="cb61-11"><a href="Prior.html#cb61-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-12"><a href="Prior.html#cb61-12" aria-hidden="true" tabindex="-1"></a>  stat_dist <span class="ot">&lt;-</span> <span class="cf">function</span>(dist, ...) {</span>
<span id="cb61-13"><a href="Prior.html#cb61-13" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">stat_function</span>(ggplot2<span class="sc">::</span><span class="fu">aes_</span>(<span class="at">color =</span> dist), ...)</span>
<span id="cb61-14"><a href="Prior.html#cb61-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-15"><a href="Prior.html#cb61-15" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">data.frame</span>(<span class="at">x =</span> xlim), ggplot2<span class="sc">::</span><span class="fu">aes</span>(x)) <span class="sc">+</span></span>
<span id="cb61-16"><a href="Prior.html#cb61-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_dist</span>(<span class="st">&quot;normal&quot;</span>, <span class="at">size =</span> .<span class="dv">75</span>, <span class="at">fun =</span> dnorm,</span>
<span id="cb61-17"><a href="Prior.html#cb61-17" aria-hidden="true" tabindex="-1"></a>              <span class="at">args =</span> <span class="fu">list</span>(<span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> scale)) <span class="sc">+</span></span>
<span id="cb61-18"><a href="Prior.html#cb61-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_dist</span>(<span class="st">&quot;student_t&quot;</span>, <span class="at">size =</span> .<span class="dv">75</span>, <span class="at">fun =</span> dt_loc_scale,</span>
<span id="cb61-19"><a href="Prior.html#cb61-19" aria-hidden="true" tabindex="-1"></a>              <span class="at">args =</span> <span class="fu">list</span>(<span class="at">df =</span> df_t, <span class="at">location =</span> <span class="dv">0</span>, <span class="at">scale =</span> scale)) <span class="sc">+</span></span>
<span id="cb61-20"><a href="Prior.html#cb61-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_dist</span>(<span class="st">&quot;cauchy&quot;</span>, <span class="at">size =</span> .<span class="dv">75</span>, <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">fun =</span> dcauchy,</span>
<span id="cb61-21"><a href="Prior.html#cb61-21" aria-hidden="true" tabindex="-1"></a>              <span class="at">args =</span> <span class="fu">list</span>(<span class="at">location =</span> <span class="dv">0</span>, <span class="at">scale =</span> scale)) <span class="sc">+</span></span>
<span id="cb61-22"><a href="Prior.html#cb61-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_dist</span>(<span class="st">&quot;laplace&quot;</span>, <span class="at">size =</span> .<span class="dv">75</span>, <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">fun =</span> dlaplace,</span>
<span id="cb61-23"><a href="Prior.html#cb61-23" aria-hidden="true" tabindex="-1"></a>              <span class="at">args =</span> <span class="fu">list</span>(<span class="at">location =</span> <span class="dv">0</span>, <span class="at">scale =</span> scale)) <span class="sc">+</span></span>
<span id="cb61-24"><a href="Prior.html#cb61-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_dist</span>(<span class="st">&quot;product_normal&quot;</span>, <span class="at">size =</span> .<span class="dv">75</span>, <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">fun =</span> dproduct_normal,<span class="at">args =</span> <span class="fu">list</span>(<span class="at">scale =</span> <span class="dv">1</span>))<span class="sc">+</span><span class="fu">theme_bw</span>()</span>
<span id="cb61-25"><a href="Prior.html#cb61-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb61-26"><a href="Prior.html#cb61-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Cauchy has fattest tails, followed by student_t, laplace, and normal</span></span>
<span id="cb61-27"><a href="Prior.html#cb61-27" aria-hidden="true" tabindex="-1"></a><span class="fu">compare_priors</span>()</span></code></pre></div>
<p><img src="bayes_bookdown_files/figure-html/unnamed-chunk-70-1.png" width="672" /></p>
<div id="r-session-information-3" class="section level3 unnumbered">
<h3>R Session information</h3>
<pre><code>## R version 4.0.5 (2021-03-31)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 19042)
## 
## Matrix products: 
## 
## locale:
## [1] LC_COLLATE=English_Canada.1252  LC_CTYPE=English_Canada.1252   
## [3] LC_MONETARY=English_Canada.1252 LC_NUMERIC=C                   
## [5] LC_TIME=English_Canada.1252    
## 
## attached base packages:
## [1] grid      stats     graphics  grDevices utils     datasets  methods  
## [8] base     
## 
## other attached packages:
##  [1] extraDistr_1.9.1    MCMCpack_1.6-0      MASS_7.3-53.1      
##  [4] coda_0.19-4         SHELF_1.8.0         bayesplot_1.8.1    
##  [7] ggmcmc_1.5.1.1      truncnorm_1.0-8     ggpubr_0.4.0       
## [10] tweenr_1.0.2        gganimate_1.0.7     VennDiagram_1.7.1  
## [13] futile.logger_1.4.3 brms_2.16.3         Rcpp_1.0.7         
## [16] forcats_0.5.1       stringr_1.4.0       dplyr_1.0.7        
## [19] purrr_0.3.4         readr_2.1.1         tidyr_1.1.4        
## [22] tibble_3.1.6        ggplot2_3.3.5       tidyverse_1.3.1</code></pre>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-cooke1991experts" class="csl-entry">
Cooke, Roger et al. 1991. <em>Experts in Uncertainty: Opinion and Subjective Probability in Science</em>. Oxford University Press on Demand.
</div>
<div id="ref-goligher2018extracorporeal" class="csl-entry">
Goligher, Ewan C, George Tomlinson, David Hajage, Duminda N Wijeysundera, Eddy Fan, Peter Jüni, Daniel Brodie, Arthur S Slutsky, and Alain Combes. 2018. <span>“Extracorporeal Membrane Oxygenation for Severe Acute Respiratory Distress Syndrome and Posterior Probability of Mortality Benefit in a Post Hoc Bayesian Analysis of a Randomized Clinical Trial.”</span> <em>Jama</em> 320 (21): 2251–59.
</div>
<div id="ref-johnson2010methods" class="csl-entry">
Johnson, Sindhu R, George A Tomlinson, Gillian A Hawker, John T Granton, and Brian M Feldman. 2010. <span>“Methods to Elicit Beliefs for Bayesian Priors: A Systematic Review.”</span> <em>Journal of Clinical Epidemiology</em> 63 (4): 355–69.
</div>
<div id="ref-johnson2010valid" class="csl-entry">
Johnson, Sindhu R, George A Tomlinson, Gillian A Hawker, John T Granton, Haddas A Grosbein, and Brian M Feldman. 2010. <span>“A Valid and Reliable Belief Elicitation Method for Bayesian Priors.”</span> <em>Journal of Clinical Epidemiology</em> 63 (4): 370–83.
</div>
<div id="ref-munshi2014extracorporeal" class="csl-entry">
Munshi, Laveena, Teagan Telesnicki, Allan Walkey, and Eddy Fan. 2014. <span>“Extracorporeal Life Support for Acute Respiratory Failure. A Systematic Review and Metaanalysis.”</span> <em>Annals of the American Thoracic Society</em> 11 (5): 802–10.
</div>
<div id="ref-noah2011referral" class="csl-entry">
Noah, Moronke A, Giles J Peek, Simon J Finney, Mark J Griffiths, David A Harrison, Richard Grieve, M Zia Sadique, et al. 2011. <span>“Referral to an Extracorporeal Membrane Oxygenation Center and Mortality Among Patients with Severe 2009 Influenza a (H1n1).”</span> <em>Jama</em> 306 (15): 1659–68.
</div>
<div id="ref-o2006uncertain" class="csl-entry">
O’Hagan, Anthony, Caitlin E Buck, Alireza Daneshkhah, J Richard Eiser, Paul H Garthwaite, David J Jenkinson, Jeremy E Oakley, and Tim Rakow. 2006. <span>“Uncertain Judgements: Eliciting Experts’ Probabilities.”</span>
</div>
<div id="ref-peek2009efficacy" class="csl-entry">
Peek, Giles J, Miranda Mugford, Ravindranath Tiruvoipati, Andrew Wilson, Elizabeth Allen, Mariamma M Thalanany, Clare L Hibbert, et al. 2009. <span>“Efficacy and Economic Assessment of Conventional Ventilatory Support Versus Extracorporeal Membrane Oxygenation for Severe Adult Respiratory Failure (CESAR): A Multicentre Randomised Controlled Trial.”</span> <em>The Lancet</em> 374 (9698): 1351–63.
</div>
<div id="ref-pham2013extracorporeal" class="csl-entry">
Pham, Tài, Alain Combes, Hadrien Rozé, Sylvie Chevret, Alain Mercat, Antoine Roch, Bruno Mourvillier, et al. 2013. <span>“Extracorporeal Membrane Oxygenation for Pandemic Influenza a (H1n1)–Induced Acute Respiratory Distress Syndrome: A Cohort Study and Propensity-Matched Analysis.”</span> <em>American Journal of Respiratory and Critical Care Medicine</em> 187 (3): 276–85.
</div>
<div id="ref-spiegelhalter2004incorporating" class="csl-entry">
Spiegelhalter, David J. 2004. <span>“Incorporating Bayesian Ideas into Health-Care Evaluation.”</span> <em>Statistical Science</em> 19 (1): 156–74.
</div>
<div id="ref-spiegelhalter2003" class="csl-entry">
Spiegelhalter, David J., Keith R. Abrams, and Jonathan P. Myles. 2003. <em>Bayesian Approaches to Clinical Trials and Health-Care Evaluation</em>. John Wiley &amp; Sons, Ltd. <a href="https://doi.org/10.1002/0470092602">https://doi.org/10.1002/0470092602</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="bayes.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="BayesMCMC.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": "twitter"
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
